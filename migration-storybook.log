ğŸ” checking possible migrations..

ğŸ” found a 'remove-jest-testing-library' migration:
â•­ Automigration detected â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                              â”‚
â”‚   Attention: We've detected that you're using the following packages which are known to be incompatible since Storybook 8:   â”‚
â”‚                                                                                                                              â”‚
â”‚   - @storybook/testing-library                                                                                               â”‚
â”‚                                                                                                                              â”‚
â”‚   We will uninstall them for you and install @storybook/test instead.                                                        â”‚
â”‚                                                                                                                              â”‚
â”‚   Also, we can help you migrate your stories to use the new package.                                                         â”‚
â”‚                                                                                                                              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
? Do you want to run the 'remove-jest-testing-library' migration on your project? â€º (Y/n)âœ” Do you want to run the 'remove-jest-testing-library' migration on your project? â€¦ yes
? Please enter the glob for your stories to migrate to @storybook/test â€º ./src/**/*.stories.*? Please enter the glob for your stories to migrate to @storybook/test â€º .? Please enter the glob for your stories to migrate to @storybook/test â€º ./src/**/*.stories.*? Please enter the glob for your stories to migrate to @storybook/test â€º .? Please enter the glob for your stories to migrate to @storybook/test â€º ./? Please enter the glob for your stories to migrate to @storybook/test â€º ./s? Please enter the glob for your stories to migrate to @storybook/test â€º ./st? Please enter the glob for your stories to migrate to @storybook/test â€º ./sto? Please enter the glob for your stories to migrate to @storybook/test â€º ./stor? Please enter the glob for your stories to migrate to @storybook/test â€º ./stori? Please enter the glob for your stories to migrate to @storybook/test â€º ./storie? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.s? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.st? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.sto? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.stor? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.stori? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.storie? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.stories? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.stories.? Please enter the glob for your stories to migrate to @storybook/test â€º ./stories/*.stories.*âœ” Please enter the glob for your stories to migrate to @storybook/test â€¦ ./stories/*.stories.*
=> Applying migrate-to-test-package: 0 files
=> No matching files for glob: ./stories/*.stories.*
âœ… ran remove-jest-testing-library migration

ğŸ” found a 'remove-argtypes-regex' migration:
â•­ Manual migration detected â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                               â”‚
â”‚   Attention: We've detected that you're using argTypesRegex:                                                  â”‚
â”‚                                                                                                               â”‚
â”‚   .storybook/preview.tsx                                                                                      â”‚
â”‚     74 |     },                                                                                               â”‚
â”‚     75 |     layout: 'fullscreen', // removes padding around the views                                        â”‚
â”‚   > 76 |     actions: { argTypesRegex: '^on[A-Z].*' },                                                        â”‚
â”‚        |                ^^^^^^^^^^^^^                                                                         â”‚
â”‚     77 |     controls: {                                                                                      â”‚
â”‚     78 |       matchers: {                                                                                    â”‚
â”‚     79 |         color: /(background|color)$/i,                                                               â”‚
â”‚                                                                                                               â”‚
â”‚   In Storybook you can write so-called play functions, which are used to render your stories interactively.   â”‚
â”‚   Mocking action args in play functions was done implicitly by analyzing the argTypesRegex.                   â”‚
â”‚                                                                                                               â”‚
â”‚   Since Storybook 8, implicit action args mocking isn't supported anymore.                                    â”‚
â”‚                                                                                                               â”‚
â”‚   Use the following command to check for mocked action usages in your play functions:                         â”‚
â”‚   npx storybook migrate find-implicit-spies --glob="**/*.stories.@(js|jsx|ts|tsx)"                            â”‚
â”‚                                                                                                               â”‚
â”‚   And follow the documentation to migrate your play functions:                                                â”‚
â”‚   https://storybook.js.org/docs/8.0/essentials/actions#via-storybooktest-fn-spy-function                      â”‚
â”‚                                                                                                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

? Select continue once you have made the required changes, or quit to exit the migration process â€º quit / continueâœ” Select continue once you have made the required changes, or quit to exit the migration process â€¦ quit / continue

ğŸ” found a 'webpack5-compiler-setup' migration:
â•­ Migration notification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                          â”‚
â”‚   Storybook now detects whether it should use Babel or SWC as a compiler by applying the same logic as Next.js itself:   â”‚
â”‚                                                                                                                          â”‚
â”‚     - If you have a .babelrc (or babel.config.js) file in your project, Storybook will use Babel as the compiler.        â”‚
â”‚     - If you have a .babelrc (or babel.config.js) file in your project and you have set                                  â”‚
â”‚       experimental.forceSwcTransforms = true in your next.config.js file,                                                â”‚
â”‚       Storybook will use SWC as the compiler.                                                                            â”‚
â”‚     - If you don't have a .babelrc (or babel.config.js) file in your project, Storybook will use SWC as the compiler.    â”‚
â”‚                                                                                                                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
? Do you want to continue? â€º (Y/n)âœ” Do you want to continue? â€¦ yes

ğŸ” found a 'upgradeStorybookRelatedDependencies' migration:
â•­ Automigration detected â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                        â”‚
â”‚   You're upgrading to the latest version of Storybook. We recommend upgrading the following packages:                                  â”‚
â”‚   - @storybook/icons: 1.2.1 => 1.2.9                                                                                                   â”‚
â”‚   - msw-storybook-addon: 1.10.0 => 2.0.0                                                                                               â”‚
â”‚   - eslint-plugin-storybook: 0.6.15 => 0.8.0                                                                                           â”‚
â”‚                                                                                                                                        â”‚
â”‚   After upgrading, we will run the dedupe command, which could possibly have effects on dependencies that are not Storybook related.   â”‚
â”‚   see: https://docs.npmjs.com/cli/commands/npm-dedupe                                                                                  â”‚
â”‚                                                                                                                                        â”‚
â”‚   Do you want to proceed (upgrade the detected packages)?                                                                              â”‚
â”‚                                                                                                                                        â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
? Do you want to run the 'upgradeStorybookRelatedDependencies' migration on your project? â€º (y/N)âœ” Do you want to run the 'upgradeStorybookRelatedDependencies' migration on your project? â€¦ yes
Installing dependencies...

An error occurred while installing dependencies.
âŒ error when running upgradeStorybookRelatedDependencies migration
HandledError: Error: Command failed with exit code 1: npm install
    at NPMProxy.installDependencies (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/core-common/dist/index.js:28:4695)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Object.run (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:556:541)
    ... 2 lines matching cause stack trace ...
    at async doUpgrade (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:618:1628)
    at async withTelemetry (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/core-server/dist/index.js:28:3579)
    at async upgrade (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:618:2097) {
  handled: true,
  cause: Error: Command failed with exit code 1: npm install
      at makeError (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/execa/lib/error.js:60:11)
      at handlePromise (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/execa/index.js:118:26)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
      at async NPMProxy.executeCommand (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/core-common/dist/index.js:35:1755)
      at async NPMProxy.runInstall (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/core-common/dist/index.js:35:5071)
      at async NPMProxy.installDependencies (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/core-common/dist/index.js:28:4590)
      at async Object.run (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:556:541)
      at async runFixes (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:604:1794)
      at async automigrate (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:602:1629)
      at async doUpgrade (/Users/matt/.npm/_npx/bc7e1e37fcb46ffc/node_modules/@storybook/cli/dist/generate.js:618:1628) {
    shortMessage: 'Command failed with exit code 1: npm install',
    command: 'npm install',
    escapedCommand: 'npm install',
    exitCode: 1,
    signal: undefined,
    signalDescription: undefined,
    stdout: undefined,
    stderr: undefined,
    failed: true,
    timedOut: false,
    isCanceled: false,
    killed: false
  }
}


ğŸ” found a 'visual-tests-addon' migration:
â•­ Automigration detected â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                                                                             â”‚
â”‚   New to Storybook 8: Storybook's Visual Tests addon helps you catch unintentional changes/bugs in your stories. The addon is powered by Chromatic, a cloud-based testing tool developed    â”‚
â”‚   by Storybook's core team.                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                             â”‚
â”‚   Learn more: storybook.js.org/docs/writing-tests/visual-testing                                                                                                                            â”‚
â”‚                                                                                                                                                                                             â”‚
â”‚   Install Visual Tests addon in your project?                                                                                                                                               â”‚
â”‚                                                                                                                                                                                             â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
? Do you want to run the 'visual-tests-addon' migration on your project? â€º (Y/n)âœ” Do you want to run the 'visual-tests-addon' migration on your project? â€¦ no
WARN An issue occurred while trying to find dependencies metadata using npm.

â•­ Migration check ran with failures â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                                               â”‚
â”‚   Successful migrations:                                                                                                                                      â”‚
â”‚                                                                                                                                                               â”‚
â”‚   remove-jest-testing-library                                                                                                                                 â”‚
â”‚                                                                                                                                                               â”‚
â”‚   Failed migrations:                                                                                                                                          â”‚
â”‚                                                                                                                                                               â”‚
â”‚   upgradeStorybookRelatedDependencies:                                                                                                                        â”‚
â”‚   Error: Command failed with exit code 1: npm install                                                                                                         â”‚
â”‚                                                                                                                                                               â”‚
â”‚   You can find the full logs in /Users/matt/charmverse/app.charmverse.io/migration-storybook.log                                                              â”‚
â”‚                                                                                                                                                               â”‚
â”‚   Manual migrations:                                                                                                                                          â”‚
â”‚                                                                                                                                                               â”‚
â”‚   remove-argtypes-regex                                                                                                                                       â”‚
â”‚                                                                                                                                                               â”‚
â”‚   Skipped migrations:                                                                                                                                         â”‚
â”‚                                                                                                                                                               â”‚
â”‚   visual-tests-addon                                                                                                                                          â”‚
â”‚                                                                                                                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                           â”‚
â”‚                                                                                                                                                               â”‚
â”‚   If you'd like to run the migrations again, you can do so by running 'npx storybook automigrate'                                                             â”‚
â”‚                                                                                                                                                               â”‚
â”‚   The automigrations try to migrate common patterns in your project, but might not contain everything needed to migrate to the latest version of Storybook.   â”‚
â”‚                                                                                                                                                               â”‚
â”‚   Please check the changelog and migration guide for manual migrations and more information: https://storybook.js.org/docs/8.0/migration-guide                â”‚
â”‚   And reach out on Discord if you need help: https://discord.gg/storybook                                                                                     â”‚
â”‚                                                                                                                                                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

